<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntelVision | Tráfego de Rede</title>

    <link
        href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="./css/global.css" />
    <link rel="stylesheet" href="./css/dashboard.css" />
    <link rel="stylesheet" href="./css/trafego.css">
</head>

<body>
    <div class="janela">

        <div class="header-left">
            <h1>IntelVision</h1>
            <div class="escolhaDash">
                <a href="servidores.html">
                    <div class="btn-nav inativo">
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                fill="#8b979f">
                                <path
                                    d="M520-600v-240h320v240H520ZM120-440v-400h320v400H120Zm400 320v-400h320v400H520Zm-400 0v-240h320v240H120Zm80-400h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z" />
                            </svg>
                            <h3>Dashboard</h3>
                        </span>
                    </div>
                </a>

                <a href="comparativo.html">
                    <div class="btn-nav inativo">
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                background="#FFFFFF" fill="#8b979f">
                                <path
                                    d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480v-80H240v80Zm0-160h480v-80H240v80Zm0-160h480v-80H240v80ZM200-200v-560 560Z" />
                            </svg>
                            <h3>Comparativo</h3>
                        </span>
                    </div>
                </a>

                <a href="predicao.html">
                    <div class="btn-nav inativo">
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                fill="#8b979f">
                                <path
                                    d="M480-120 232-360l-112 80v-98l120-86 245 238 167-134h188v80H680L480-120Zm0-360L305-655 120-520v-99l193-141 175 175 352-255v99L480-480Z" />
                            </svg>
                            <h3>Predição</h3>
                        </span>
                    </div>
                </a>

                <a href="trafego.html">
                    <div class="btn-nav ativo">
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                fill="#8b979f">
                                <path
                                    d="M198-278q-57-57-87.5-129.5T80-560q0-80 30.5-152.5T198-842l48 48q-47 47-72.5 107.5T148-560q0 66 25.5 126.5T246-326l-48 48Zm92-92q-38-38-58-87t-20-103q0-54 20-103t58-87l48 48q-29 29-43.5 65.5T280-560q0 40 14.5 76.5T338-418l-48 48Zm150 250v-348q-27-12-43.5-37T380-560q0-42 29-71t71-29q42 0 71 29t29 71q0 30-16.5 55T520-468v348h-80Zm230-250-48-48q29-29 43.5-65.5T680-560q0-40-14.5-76.5T622-702l48-48q38 38 58 87t20 103q0 54-20 103t-58 87Zm92 92-48-48q47-47 72.5-107.5T812-560q0-66-25.5-126.5T714-794l48-48q57 57 87.5 129.5T880-560q0 80-30.5 152.5T762-278Z" />
                            </svg>
                            <h3>Tráfego de rede</h3>
                        </span>
                    </div>
                </a>

                <a href="./tela-servidores-codecs.html">
                    <div class="btn-nav inativo" id="btn-nav-admin-servidores">
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                fill="#8b979f">
                                <path
                                    d="M160-400v-80h640v80H160Zm0-120v-80h640v80H160ZM440-80v-128l-64 64-56-56 160-160 160 160-56 56-64-62v126h-80Zm40-560L320-800l56-56 64 64v-128h80v128l64-64 56 56-160 160Z" />
                            </svg>
                            <h3>Análise-Codecs</h3>
                        </span>
                    </div>
                </a>
            </div>

            <a href="./dashboard-jira.html">
                <div class="btn-nav inativo">
                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                            fill="#8b979f">
                            <path
                                d="M160-160v-440h160v440H160Zm0-480v-160h160v160H160Zm240 480v-320h160v320H400Zm0-360v-160h160v160H400Zm240 360v-200h160v200H640Zm0-240v-160h160v160H640Z" />
                        </svg>
                        <h3>Chamados</h3>
                    </span>
                </div>
            </a>

            <a href="./tela-administracao-usuario.html">
                <div class="btn-nav inativo" id="btn-nav-admin-usuarios">
                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                            fill="#8b979f">
                            <path
                                d="M400-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM80-160v-112q0-33 17-62t47-44q51-26 115-44t141-18h14q6 0 12 2-8 18-13.5 37.5T404-360h-4q-71 0-127.5 18T180-306q-9 5-14.5 14t-5.5 20v32h252q6 21 16 41.5t22 38.5H80Zm560 40-12-60q-12-5-22.5-10.5T584-204l-58 18-40-68 46-40q-2-14-2-26t2-26l-46-40 40-68 58 18q11-8 21.5-13.5T628-460l12-60h80l12 60q12 5 22.5 11t21.5 15l58-20 40 70-46 40q2 12 2 25t-2 25l46 40-40 68-58-18q-11 8-21.5 13.5T732-180l-12 60h-80Zm40-120q33 0 56.5-23.5T760-320q0-33-23.5-56.5T680-400q-33 0-56.5 23.5T600-320q0 33 23.5 56.5T680-240ZM400-560q33 0 56.5-23.5T480-640q0-33-23.5-56.5T400-720q-33 0-56.5 23.5T320-640q0 33 23.5 56.5T400-560Zm0-80Zm12 400Z" />
                        </svg>
                        <h3>Adm - Usuários</h3>
                    </span>
                </div>
            </a>

            <a href="./tela-administracao-servidores.html">
                <div class="btn-nav inativo" id="btn-nav-admin-servidores">
                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                            fill="#8b979f">
                            <path
                                d="M200-200v-160 4-4 160Zm0 80q-33 0-56.5-23.5T120-200v-160q0-33 23.5-56.5T200-440h560q33 0 56.5 23.5T840-360H200v160h400v80H200Zm0-400q-33 0-56.5-23.5T120-600v-160q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v160q0 33-23.5 56.5T760-520H200Zm0-80h560v-160H200v160Zm0 0v-160 160ZM760-40v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80Z" />
                        </svg>
                        <h3>Adm - Servidores</h3>
                    </span>
                </div>
            </a>

            <div class="btn-nav btn-logout inativo" onclick="limparSessao()">
                <a href="./index.html">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                        fill="#8b979f">
                        <path
                            d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z" />
                    </svg>
                    <h3>Sair</h3>
                </a>
            </div>
        </div>

        <main class="conteudo-principal">
            <header class="cabecalho-topo">
                <div>
                    <h2>Tráfego de Rede</h2>
                    <p>Monitoramento histórico via S3 •</p>
                </div>

                <div class="control-bar">
                    <div class="input-wrapper">
                        <select id="selectServidor" class="select-input">
                            <option value="">Carregando servidores...</option>
                        </select>
                    </div>

                    <div class="input-wrapper">
                        <input type="date" id="dateFilter" class="date-input">
                    </div>

                    <button class="btn-primary" id="btnConsultar">
                        <i class="fa-solid fa-magnifying-glass"></i> Buscar
                    </button>
                </div>
            </header>

            <div id="msgErro" style="display:none; color: var(--red); margin-bottom: 20px; font-weight: bold;">
                Nenhum dado encontrado para este servidor nesta data.
            </div>

            <div class="grid-kpi">
                <div class="cartao cartao-kpi" id="cardTotal">
                    <div class="info-kpi">
                        <span class="titulo-kpi">Tráfego Total (Dia)</span>
                        <h3 class="valor-kpi" id="kpiTotalTrafego">-- GB</h3>
                        <p class="sub-kpi">Soma de Upload + Download</p>
                    </div>
                    <div class="caixa-icone esmeralda" id="iconTotal">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                        </svg>
                    </div>
                </div>

                <div class="cartao cartao-kpi" id="cardPico">
                    <div class="info-kpi">
                        <span class="titulo-kpi">Pico de Banda</span>
                        <h3 class="valor-kpi" id="kpiPicoBanda">-- Mbps</h3>
                        <p class="sub-kpi">Velocidade máxima registrada</p>
                    </div>
                    <div class="caixa-icone vermelho" id="iconPico">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 12.55a11 11 0 0 1 14.08 0"></path>
                            <path d="M1.42 9a16 16 0 0 1 21.16 0"></path>
                            <path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path>
                            <line x1="12" y1="20" x2="12.01" y2="20"></line>
                        </svg>
                    </div>
                </div>

                <div class="cartao cartao-kpi" id="cardLatencia">
                    <div class="info-kpi">
                        <span class="titulo-kpi">Latência Média</span>
                        <h3 class="valor-kpi" id="kpiLatencia">-- ms</h3>
                        <p class="sub-kpi" id="kpiJitter">Jitter médio: -- ms</p>
                    </div>
                    <div class="caixa-icone esmeralda" id="iconLatencia">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="19" x2="12" y2="5"></line>
                            <polyline points="5 12 12 5 19 12"></polyline>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="linha-grid-graficos">
                <div class="cartao grafico-grande">
                    <div class="cabecalho-cartao">
                        <h3>Fluxo de Rede (Download vs Upload)</h3>
                        <p id="labelServidorGrafico">Servidor: Selecione...</p>
                    </div>
                    <div class="container-canvas grande">
                        <canvas id="bandwidthChart"></canvas>
                    </div>
                </div>

                <div class="cartao lista-topo">
                    <h3>Top Processos (CPU)</h3>
                    <p style="font-size: 0.8rem; color: #999; margin-bottom: 10px;">Processos ativos no momento do pico
                    </p>
                    <div class="container-lista" id="top-processes-list">
                    </div>
                </div>
            </div>

            <div class="cartao secao-estabilidade">
                <div class="cabecalho-cartao flex-entre">
                    <div>
                        <h3 class="flex-alinhado">
                            Análise de Estabilidade
                        </h3>
                        <p>Comparativo: Latência vs Jitter ao longo do dia</p>
                    </div>
                    <div class="legenda">
                        <div class="item-legenda"><span class="ponto verde"></span> Latência (ms)</div>
                        <div class="item-legenda"><span class="ponto amarelo"></span> Jitter (ms)</div>
                    </div>
                </div>
                <div class="container-canvas medio">
                    <canvas id="stabilityChart"></canvas>
                </div>
            </div>

            <div class="grid-inferior">
                <div class="cartao container-tabela-alertas">
                    <div class="cabecalho-cartao borda-inferior">
                        <h3 class="flex-alinhado">
                            <svg class="icone-alerta" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z">
                                </path>
                                <line x1="12" y1="9" x2="12" y2="13"></line>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                            Histórico de Alertas (JSON)
                        </h3>
                    </div>
                    <div class="tabela-rolavel">
                        <table>
                            <thead>
                                <tr>
                                    <th style="width: 15%;">HORÁRIO</th>
                                    <th style="width: 15%;">SEVERIDADE</th>
                                    <th style="width: 20%;">SERVIDOR</th>
                                    <th>MENSAGEM DO SISTEMA</th>
                                </tr>
                            </thead>
                            <tbody id="alerts-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="grid-mini-cartoes">
                    <div class="cartao mini-cartao hover-vermelho">
                        <div>
                            <p class="mini-titulo">Perda Máxima</p>
                            <h4 class="mini-valor" id="miniPerda">0%</h4>
                        </div>
                        <div class="mini-icone">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                            </svg>
                        </div>
                    </div>

                    <div class="cartao mini-cartao hover-ambar">
                        <div>
                            <p class="mini-titulo">Saturação Máx</p>
                            <h4 class="mini-valor" id="miniSaturacao">0%</h4>
                        </div>
                        <div class="mini-icone">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <line x1="18" y1="20" x2="18" y2="10"></line>
                                <line x1="12" y1="20" x2="12" y2="4"></line>
                                <line x1="6" y1="20" x2="6" y2="14"></line>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </main>

    </div>
    <script type="module" src="./js/trafego.js"></script>

</body>

</html>